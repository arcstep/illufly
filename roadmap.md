# 一、开发计划

## 1. 创作方法

**创作方法：**

- 核心方法:

  - 思考：基于文档和历史提问、生成创意
  - 规划：生成提纲和写作计划
  - 写作：按计划扩写

- 其他方法:

  - 局部改写：局部重写元素或段落
  - 循环重写：按段落循环重写、仿写、翻译
  - 循环提取：从已完成或资料提取摘要、知识
  - 更多提纲：从提纲扩写
  - 拆分提纲：按清单生成多份提纲文件

- 人工操作:

  - 合并：从多个提纲
  - 导出：网页，word
  - 修改：合并连续人工修改历史记录

**输入描述：**

- 任务：写作任务描述
- 已完成：草稿、资料、提纲、已输出
- 对话历史：近期历史，最近 K 轮对话 / 不超过 tokens 字的最近对话
- 知识文档：参考资料，超长时自动转为文本嵌入，默认由项目指定
- 提示语总 Token 限制：由环境变量或调用时指定

**输出文件：**

- 按输出 ID 保存日志：初始化或输出文件后重新生成输出 ID，或指定
- 输出文件名作为可选属性，但将输出文件名和 ID 关系记录于项目配置
- 未指定时输出文件时不写入副本

**从历史签出：**

- 签出文件：

  - （默认）按时间签出最新文件或对话
  - 按输出 ID 签出最新文件或对话
  - 按输出文件签出最新文件或对话

- 列举：
  - （默认）按时间列举生成的文件
  - 按输出 ID 签出最新文件
  - 按文件列举生成的版本

**项目管理：**

- 写作方法: idea, outline, from_outline ...
- 本地提示语: hub.load_prompt, hub.save_prompt, hub.clone_prompt
- 项目恢复: init, save_project
- 命令历史: load_commands, load_history
- 批处理: save_script, load_script, run_script
- 版本恢复: checkout
- 其他指令：session, save_as

**提示语模板：**

- 克隆提示语：clone_prompt
- 从代码构建提示语：save_prompt
- 手动编辑提示语
- 支持模板继承

**作为 SDK 使用：**

- 支持在流式输出中将日志和最终结果分离
- 支持可定制的颜色打印
- 支持 fake 模式
- 支持 verbose 模式
- 支持工程封装：将模型和 base_folder 封装在 Project

**作为 Chain 使用：**

- 支持 QA 链：可选记忆体，可动态构建文本嵌入
- 支持写作链：将 SDK 方法封装为 langserve 可直接使用的 Runnable

**作为 API 使用：**

- 匿名用户管理
- 用户授权对接
- 对话 session 和访问资源管理
- Access Token 管理

**更多提示语模板：**

- 翻译
- 仿写
- 摘要
- 提炼
- 提炼概念
- 提炼知识三元组

**RAG 能力集成：**

- 加载 本地文件：docx / pdf /md / txt / xlsx
- 加载 QA-Excel：支持 QA 和普通 xls 文本
- 支持从多个目录加载

- 文本嵌入缓存和加载
- 支持按嵌入模型各自缓存
- 支持基于 redis 的缓存

- 支持记忆：基于内存、基于文件

- 支持`QA`元数据查询
- 支持`概念`元数据查询
- 支持`知识三元组`元数据关联查询

- 生成 QA 文档：设定 Q 和 A 的标题层次，以及 QA 分割线
- 从已有文档提炼资料：摘要、概念、实体、流程、三元组、QA

- 从 QA 结果作为生成文档的 knowledge

**Jupuyter 笔记**

- 启动模板：大模型配置、QA 应用和项目创作的 python 工具包
- 快速启动：零代码直接可用和简洁函数
- 支持命令行：结合启动模板，快速启动 Jupyter 环境

## 2. 跟踪和评估

**项目配置：**

- 项目配置文件
- 项目脚本文件
- 基于 redis 管理项目配置
- 基于 redis 管理项目脚本

**项目日志：**

- 生成日志
- 基于 redis 保存日志

**生成跟踪：**

- 保存输入和输出历史记录：输入参数、输出结果、提示语参数、大模型参数、token 使用
- 大模型和输出结果：评估指令跟随状况
- 提示语版本和输出结果：评估指令控制能力
- 输入参数和输出结果：评估指令工程效果
- 大模型 Token 跟踪：统计 Token 消耗

**生成评估：**

- 平行输入：按大模型参数、提示语版本、输入参数等
- 平行输出：每个评估一个输出标签文件夹
- 质量标注：对所有平行输出打标签
- 生成约束测试：对齐国内法律法规、道德规范

## 3. FastAPI

- 项目列表
- 项目生成
- 分享网页
- 提示语模板
- session 管理

## 4. QA

- 加载 本地文件：docx / pdf /md / txt / xlsx
- 加载 QA-Excel：支持 QA 和普通 xls 文本
- 支持从多个文件夹加载
- 支持文本嵌入缓存
- 支持记忆：基于内存、基于文件
- 支持按用户加载

- 支持文本拆分
- 支持 QA 查询
- 支持概念查询
- 支持知识三元组关联查询

- 从 parquet 查询数据并分析
- 从 xls 查询数据并分析
- 从 SQL 查询数据并分析
